TODO
====

* Replace common patterns and loops with what they do
